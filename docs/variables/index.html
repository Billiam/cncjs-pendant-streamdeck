<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Variables - CNCjs Pendant Stream Deck</title>
<meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://billiam.github.io/cncjs-pendant-streamdeck/favicon.ico><link rel=stylesheet href=/cncjs-pendant-streamdeck/css/style.min.bb59d5a7c70b2ce4408f747e095893c9227ad560e900452744688da34595f8f1.css></head><body class='page page-default-single'><div id=main-menu-mobile class=main-menu-mobile><ul><li class=menu-item-home><a href=/cncjs-pendant-streamdeck/><span>Home</span></a></li><li class=menu-item-docs><a href=/cncjs-pendant-streamdeck/docs/><span>Docs</span></a></li><li class=menu-item-validator><a href=/cncjs-pendant-streamdeck/validator/><span>Validator</span></a></li></ul></div><div class=wrapper><div class=header><div class=container><div id=main-menu class=main-menu><ul><li class=menu-item-home><a href=/cncjs-pendant-streamdeck/><span>Home</span></a></li><li class=menu-item-docs><a href=/cncjs-pendant-streamdeck/docs/><span>Docs</span></a></li><li class=menu-item-validator><a href=/cncjs-pendant-streamdeck/validator/><span>Validator</span></a></li></ul></div><button id=toggle-main-menu-mobile class="hamburger hamburger--slider" type=button>
<span class=hamburger-box><span class=hamburger-inner></span></span></button></div></div><div class="container pt-2 pt-md-6 pb-3 pb-md-6"><div class=row><div class="col-12 col-lg-2 pb-3 pb-lg-0"><div class=sidebar><div class=docs-menu><h4>Docs</h4><ul><li><a href=https://billiam.github.io/cncjs-pendant-streamdeck/docs/installation/>Installation</a></li><li><a href=https://billiam.github.io/cncjs-pendant-streamdeck/docs/editor/>Editor</a></li><li><a href=https://billiam.github.io/cncjs-pendant-streamdeck/docs/configure/>Configuration</a></li><li><a href=https://billiam.github.io/cncjs-pendant-streamdeck/docs/actions/>Actions</a></li><li class=active><a href=https://billiam.github.io/cncjs-pendant-streamdeck/docs/variables/>Variables</a></li><li><a href=https://billiam.github.io/cncjs-pendant-streamdeck/docs/tips/>Tips</a></li></ul></div></div></div><nav class="docs-toc toc-sticky col-12 col-md-3" aria-label="Secondary navigation"><div class=page-links><h4>On this page</h4><nav id=TableOfContents><ul><li><a href=#conditions>Conditions</a></li><li><a href=#templates>Templates</a></li><li><a href=#variables>Variables</a><ul><li><a href=#ui><code>ui</code></a></li><li><a href=#cnc>cnc</a></li><li><a href=#gcode><code>gcode</code></a></li></ul></li></ul></nav></div></nav><div class="col-12 col-lg-7 col-md-9"><h1 class=title>Variables</h1><div class="content anchor-link-enabled"><h2 id=conditions>Conditions</h2><p>You may want to conditionally hide buttons, or visibly disable them, based on the current application state: Whether a
job is currently running, whether the pendant is running in a web browser or a Stream Deck, whether gcode has been
loaded, and so on.</p><p>The <code>disabled</code> and <code>if</code> properties of a <a href=https://billiam.github.io/cncjs-pendant-streamdeck/docs/configure/#buttonsunique-button-name>button&rsquo;s</a> configuration are
strings which are evaluated with a limited set of javascript.</p><p>Math, ternary, numeric comparison and logical operators are allowed, but methods may not be executed.</p><p>Most of the application state is available for these conditions, see <a href=#variables>variables</a></p><p>Conditions which are evaluated to a <a href=https://developer.mozilla.org/en-US/docs/Glossary/Truthy>truthy</a> value will be
shown for <code>if</code> properties, or disabled for <code>disabled</code> properties.
Conditions which evaluate to a <a href=https://developer.mozilla.org/en-US/docs/Glossary/Falsy>falsy</a> value will be
hidden for <code>if</code> properties, or enabled for <code>disabled</code> properties.</p><p class=codeblock-label>example</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;buttons&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;web_only_alarm_button&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;if&#34;</span><span class=p>:</span> <span class=s2>&#34;ui.web&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;disabled&#34;</span><span class=p>:</span> <span class=s2>&#34;!cnc.alarm&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;increase_feed_rate&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;disabled&#34;</span><span class=p>:</span> <span class=s2>&#34;cnc.overrides.feed === 200&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=templates>Templates</h2><p>A <a href=https://billiam.github.io/cncjs-pendant-streamdeck/docs/configure/#buttonsunique-button-name>button&rsquo;s</a> <code>text</code> configuration value can be used to display a
plain text string, but it can also act as a simple text <em>template</em>, containing and displaying application state
information, which will be updated and re-rendered whenever any of the referenced state changes.</p><p>A text template is a string containing <code>{{ code }}</code>. Code within these braces will be evaluated with the same rules as
<a href=#conditions>conditions</a>.</p><p class=codeblock-label>example</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;buttons&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;hello_world&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;text&#34;</span><span class=p>:</span> <span class=s2>&#34;hello world!&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;Current X Position&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;text&#34;</span><span class=p>:</span> <span class=s2>&#34;X Position: {{cnc.mpos.x}}&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=variables>Variables</h2><p>Variables represent pieces of application state that can be used for <a href=#conditions>conditions</a> and
<a href=#templates>text templates</a>. Some of these values are internal only, and unlikely to be useful for button
display. These have not been documented below.</p><p>These variables are available under 3 different objects: <a href=#ui><code>ui</code></a>, <a href=#cnc><code>cnc</code></a> and <a href=#gcode><code>gcode</code></a>.</p><h3 id=ui><code>ui</code></h3><p>State related to the current pendant user interface</p><table><thead><tr><th>Value</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>ui.brightness</code></td><td><span class="badge bg-info typeinfo">Integer</span></td><td>The current brightness value. [<code>10</code> - <code>100</code>] <span class="badge bg-success">Stream Deck only</span></td></tr><tr><td><code>ui.feedrateInterval</code></td><td><span class="badge bg-info typeinfo">Integer</span></td><td>The amount that feedrate will be increased or decreased by when modified</td></tr><tr><td><code>ui.spindleInterval</code></td><td><span class="badge bg-info typeinfo">Integer</span></td><td>The amount that spindle speed will be increased or decreased by when modified</td></tr><tr><td><code>ui.userFlags</code></td><td><span class="badge bg-info typeinfo">Object</span></td><td>Object containing <a href=https://billiam.github.io/cncjs-pendant-streamdeck/docs/actions/#user-flag-actions>user flag data</a>. Ex: <code>ui.userFlags.MyValue</code></td></tr><tr><td><code>ui.input.value</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>Numeric string representing the current value for the numpad input scene</td></tr><tr><td><code>ui.input.previous</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The previous value of the input being set by the numpad input scene</td></tr><tr><td><code>ui.input.type</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>A label for the type of input being set by the numpad input scene</td></tr><tr><td><code>ui.web</code></td><td><span class="badge bg-info typeinfo">Boolean</span></td><td>Whether the pendant is being used in a web browser or on a Stream Deck device</td></tr><tr><td><code>ui.sceneName</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The name of the currently active scene</td></tr></tbody></table><h3 id=cnc>cnc</h3><p>State related to the machine or cncjs&rsquo;s</p><table><thead><tr><th>Value</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>cnc.connected</code></td><td><span class="badge bg-info typeinfo">Boolean</span></td><td>Whether cncjs is connected to the machine by serial port</td></tr><tr><td><code>cnc.connecting</code></td><td><span class="badge bg-info typeinfo">Boolean</span></td><td>Whether cncjs is currently in the process of connecting</td></tr><tr><td><code>cnc.runState</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The current controller state. One of [<code>Idle</code>, <code>Alarm</code>, <code>Hold</code>, <code>Jog</code>, <code>Run</code>]</td></tr><tr><td><code>cnc.workflowState</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The cncjs workflow state. One of [<code>idle</code>, <code>paused</code>, <code>running</code>]</td></tr><tr><td><code>cnc.feederState</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The cncjs feeder state. One of [<code>idle</code>, <code>paused</code>]</td></tr><tr><td><code>cnc.locked</code></td><td><span class="badge bg-info typeinfo">Boolean</span></td><td>Whether the controller is in an Alarm Lock state</td></tr><tr><td><code>cnc.elapsedTime</code></td><td><span class="badge bg-info typeinfo">Integer</span></td><td>The elapsed job time, in seconds</td></tr><tr><td><code>cnc.elapsedTimeText</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The elapsed job time, in <code>hh:mm:ss</code> format, or empty string if not available</td></tr><tr><td><code>cnc.remainingTime</code></td><td><span class="badge bg-info typeinfo">Integer</span></td><td>The remaining job time, in seconds</td></tr><tr><td><code>cnc.remainingTimeText</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The remaining job time, in <code>hh:mm:ss</code> format, or empty string if not available</td></tr><tr><td><code>cnc.alarm</code></td><td><span class="badge bg-info typeinfo">Boolean</span></td><td>Whether or not Grbl is in an alarm state</td></tr><tr><td><code>cnc.alarmText</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>Preformatted alarm text/reason/locked status for button display</td></tr><tr><td><code>cnc.alarmReason</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The reason for an alarm, if known</td></tr><tr><td><code>cnc.pauseReason</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>Pause reason, if known. Example: <code>M6</code></td></tr><tr><td><code>cnc.pauseMessage</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>Pause reason text, if known</td></tr><tr><td><code>cnc.pauseText</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>Preformatted pause reason and text for button display</td></tr><tr><td><code>cnc.errorMessage</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The error reason, if the pause state is associated with an error</td></tr><tr><td><code>cnc.feedPauseReason</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The cncjs feed pause reason, if known</td></tr><tr><td><code>cnc.feedPauseMessage</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The cncjs feed pause text, if known</td></tr><tr><td><code>cnc.jogDistance</code></td><td><span class="badge bg-info typeinfo">Number</span></td><td>The distance value to use for jog commands. Does not include units</td></tr><tr><td><code>cnc.jogSpeed</code></td><td><span class="badge bg-info typeinfo">Number</span></td><td>The speed to use for smooth jogging. Does not include units</td></tr><tr><td><code>cnc.settings</code></td><td><span class="badge bg-info typeinfo">Object</span></td><td>The current raw Grbl setting values</td></tr><tr><td><code>cnc.wpos</code></td><td><span class="badge bg-info typeinfo">Object</span></td><td>The current work position</td></tr><tr><td><code>cnc.wpos.x</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The current X work position</td></tr><tr><td><code>cnc.wpos.y</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The current Y work position</td></tr><tr><td><code>cnc.wpos.z</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The current Z work position</td></tr><tr><td><code>cnc.wpos.a</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The current A work position</td></tr><tr><td><code>cnc.wpos.b</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The current B work position</td></tr><tr><td><code>cnc.wpos.c</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The current C work position</td></tr><tr><td><code>cnc.displayWpos</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>Preformatted multiline string of all <a href=https://billiam.github.io/cncjs-pendant-streamdeck/docs/configure/#machine>enabled axes</a> and their work positions with string padding for alignment</td></tr><tr><td><code>cnc.mpos</code></td><td><span class="badge bg-info typeinfo">Object</span></td><td>The current machine position</td></tr><tr><td><code>cnc.mpos.x</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The current X machine position</td></tr><tr><td><code>cnc.mpos.y</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The current Y machine position</td></tr><tr><td><code>cnc.mpos.z</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The current Z machine position</td></tr><tr><td><code>cnc.mpos.a</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The current A machine position</td></tr><tr><td><code>cnc.mpos.b</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The current B machine position</td></tr><tr><td><code>cnc.mpos.c</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The current C machine position</td></tr><tr><td><code>cnc.feedRate</code></td><td><span class="badge bg-info typeinfo">Number</span></td><td>The current feed rate. Does not include units</td></tr><tr><td><code>cnc.spindleRpm</code></td><td><span class="badge bg-info typeinfo">Number</span></td><td>The current spindle RPM as in integer</td></tr><tr><td><code>cnc.displayMpos</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>Preformatted multiline string of all <a href=https://billiam.github.io/cncjs-pendant-streamdeck/docs/configure/#machine>enabled axes</a> and their machine positions with string padding for alignment</td></tr><tr><td><code>cnc.modal</code></td><td><span class="badge bg-info typeinfo">Object</span></td><td>Grbl modal state information</td></tr><tr><td><code>cnc.modal.distance</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>Current motion mode. Either <code>G90</code> or <code>G91</code></td></tr><tr><td><code>cnc.modal.units</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>Current distance units. Either <code>G20</code> or <code>G21</code></td></tr><tr><td><code>cnc.modal.wcs</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The current work offset: One of [<code>G54</code>, <code>G55</code>, <code>G56</code>, <code>G57</code>, <code>G58</code>, <code>G59</code>]</td></tr><tr><td><code>cnc.isRelativeMove</code></td><td><span class="badge bg-info typeinfo">Boolean</span></td><td>Whether the current modal distance is <code>G91</code> (relative)</td></tr><tr><td><code>cnc.distanceUnit</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The current distance unit, one of <code>mm</code> or <code>in</code></td></tr><tr><td><code>cnc.ready</code></td><td><span class="badge bg-info typeinfo">Boolean</span></td><td>Whether the machine is connected and either in the <code>idle</code> or <code>jog</code> (meaning smooth jogging) states</td></tr><tr><td><code>cnc.overrides</code></td><td><span class="badge bg-info typeinfo">Object</span></td><td>Current Grbl speed overrides</td></tr><tr><td><code>cnc.overrides.feed</code></td><td><span class="badge bg-info typeinfo">Integer</span></td><td>The current feed rate override [<code>10</code> - <code>200</code>]</td></tr><tr><td><code>cnc.overrides.spindle</code></td><td><span class="badge bg-info typeinfo">Integer</span></td><td>The current spindle speed override [<code>10</code> - <code>200</code>]</td></tr><tr><td><code>cnc.overrides.rapid</code></td><td><span class="badge bg-info typeinfo">Integer</span></td><td>The current rapid speed override. One of: [<code>25</code>, <code>50</code>, <code>100</code>]</td></tr><tr><td><code>cnc.hold</code></td><td><span class="badge bg-info typeinfo">Boolean</span></td><td>Whether the controller state is currently <code>Hold</code></td></tr><tr><td><code>cnc.paused</code></td><td><span class="badge bg-info typeinfo">Boolean</span></td><td>Whether both the cncjs workflow and feed state are both in a paused state</td></tr><tr><td><code>cnc.feedPaused</code></td><td><span class="badge bg-info typeinfo">Boolean</span></td><td>Whether the cncjs feed state is <code>paused</code></td></tr><tr><td><code>cnc.idle</code></td><td><span class="badge bg-info typeinfo">Boolean</span></td><td>Whether the cncjs workflow and feed state are both in a idle state</td></tr><tr><td><code>cnc.running</code></td><td><span class="badge bg-info typeinfo">Boolean</span></td><td>Whether the cncjs workflow state is <code>Running</code> and the feed state is <code>idle</code></td></tr><tr><td><code>cnc.axisLimits</code></td><td><span class="badge bg-info typeinfo">Object</span></td><td>The current Grbl axis limits. Keys depend on <a href=https://billiam.github.io/cncjs-pendant-streamdeck/docs/configure/#machine>machine axes configuration</a></td></tr></tbody></table><h3 id=gcode><code>gcode</code></h3><p>State related to the currently loaded gcode.</p><table><thead><tr><th>Value</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>gcode.name</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The path to the currently loaded gcode file, if any</td></tr><tr><td><code>gcode.gcode</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The raw gcode content, if loaded</td></tr><tr><td><code>gcode.displayRange</code></td><td><span class="badge bg-info typeinfo">Object</span></td><td>Preformatted range information from the loaded gcode</td></tr><tr><td><code>gcode.displayRange.min</code></td><td><span class="badge bg-info typeinfo">Object</span></td><td>The minimum axis range for the loaded gcode</td></tr><tr><td><code>gcode.displayRange.min.x</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The minimum X axis value for the loaded gcode</td></tr><tr><td><code>gcode.displayRange.min.y</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The minimum Y axis value for the loaded gcode</td></tr><tr><td><code>gcode.displayRange.min.z</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The minimum Z axis value for the loaded gcode</td></tr><tr><td><code>gcode.displayRange.max</code></td><td><span class="badge bg-info typeinfo">Object</span></td><td>The maximum axis range for the loaded gcode</td></tr><tr><td><code>gcode.displayRange.max.x</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The maximum X axis value for the loaded gcode</td></tr><tr><td><code>gcode.displayRange.max.y</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The maximum Y axis value for the loaded gcode</td></tr><tr><td><code>gcode.displayRange.max.z</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>The maximum Z axis value for the loaded gcode</td></tr><tr><td><code>gcode.displayRange</code></td><td><span class="badge bg-info typeinfo">Object</span></td><td>Preformatted dimension information from the loaded gcode</td></tr><tr><td><code>gcode.displayRange.x</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>Total gcode width along the X axis</td></tr><tr><td><code>gcode.displayRange.y</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>Total gcode depth along the Y axis</td></tr><tr><td><code>gcode.displayRange.z</code></td><td><span class="badge bg-info typeinfo">String</span></td><td>Total gcode height along the Z axis</td></tr></tbody></table></div></div></div></div></div><div class=sub-footer><div class=container><div class=row><div class=col-12><div class=sub-footer-inner><ul></ul></div></div></div></div></div><script type=text/javascript src=/cncjs-pendant-streamdeck/js/scripts.min.ec19db7e4836c12e2c5e3697d926bc3e4c22005167d9826aab54feca08f0c093.js></script></body></html>